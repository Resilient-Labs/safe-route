<%- include('partials/header') -%>
<link rel="stylesheet" href="/css/mapView.css">
<!-- Leaflet CSS -->



<!-- Main Content -->
    <main class="main-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <h2>Map View Page</h2>

        <!-- View Nearby Alerts Section -->
        <section class="section">
          <h3>View Nearby Alerts</h3>
          <p>No Sign-In Needed</p>
          <div class="form-group">
            <input
              type="text"
              placeholder="Enter Address or Zip Code"
              id="searchLocation" />
          </div>
          <button class="submit-btn" onclick="searchAlerts()">Submit</button>
        </section>

        <!-- Submit an Alert Section -->
        <section class="section">
          <h3>Submit an Alert</h3>
          <p>Click the Map or Use the Form Below to Submit an Alert</p>

          <form id="alertForm">
            <div class="form-group">
              <label for="incidentType">Incident Type</label>
              <select id="incidentType" name="incidentType">
                <option value="">Select Type</option>
                <% const incidentTypes = locals.incidentTypes || [ { value: 'accessibility', label: 'Accessibility Issue' }, 
                { value: 'safety', label: 'Safety Concern' }, { value: 'lighting', label: 'Poor Lighting' }, 
                { value: 'maintenance', label: 'Maintenance Needed' }, { value: 'other', label: 'Other' } ]; %> <% incidentTypes.forEach(type => { %>
                <option value="<%= type.value %>"><%= type.label %></option>
                <% }); %>
              </select>
            </div>

            <div class="form-group">
              <label for="address">Address</label>
              <input
                type="text"
                id="address"
                name="address"
                placeholder="Enter Address" />
            </div>

            <div class="form-group">
              <label for="description">Description</label>
              <textarea
                id="description"
                name="description"
                placeholder="Enter Incident Details"></textarea>
            </div>

            <div class="checkbox-group">
              <input type="checkbox" id="uploadImage" name="uploadImage" />
              <label for="uploadImage">Upload Image</label>
            </div>

            <button type="submit" class="submit-btn">Submit Alert</button>
          </form>
        </section>
      </aside>

      <!-- Map Container -->
      <div class="map-container">
        <h1 class="map-title">Your Neighborhood Safety Map</h1>
        <div id="map"></div>
      </div>
    </main>


     <script>
      window.serverData = {
        mapCenter: <%- JSON.stringify(locals.mapCenter) %>
        markers: <%- JSON.stringify(locals.markers) %> };
    </script>


    <!-- Footer -->
    <%- include('partials/footer') -%>

    <!-- Pass server data to JavaScript -->

   
   